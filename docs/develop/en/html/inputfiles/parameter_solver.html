
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>5.3. [sampling.solver], [mlref.solver] section &#8212; abICS 2.1-dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.4. [train] section" href="parameter_train.html" />
    <link rel="prev" title="5.2. [mlref] section" href="parameter_mlref.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="sampling-solver-mlref-solver-section">
<h1><span class="section-number">5.3. </span>[sampling.solver], [mlref.solver] section<a class="headerlink" href="#sampling-solver-mlref-solver-section" title="Permalink to this heading">¶</a></h1>
<p>These sections specify the parameters of solvers, which calculate the energy of a configuration (e.g., atomic positions).
<code class="docutils literal notranslate"><span class="pre">sampling.solver</span></code> is used while Monte Carlo sampling, and <code class="docutils literal notranslate"><span class="pre">mlref.solver</span></code> is used for generating training dataset of a machine learning model.</p>
<p>In the present version, there are two main types of solvers.</p>
<ul>
<li><p>Ab initio solvers</p>
<blockquote>
<div><ul>
<li><p>Solvers for calculating DFT energy from atomic position.</p></li>
<li><p>Indeed, abICS uses an external DFT solver package such as VASP.</p>
<blockquote>
<div><ul class="simple">
<li><p>Parameters of the DFT solver such as convergence criteria are specified by using input files of the solver.</p></li>
<li><p>Solver specific notes (e.g., input filename) are described in <a class="reference internal" href="../how_to_use/index.html#solver-specific-notes"><span class="std std-ref">Specific notes for first-principles solvers</span></a>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Configurations (atomic positions, atomic species, etc.) are specified by the <code class="docutils literal notranslate"><span class="pre">[config]</span></code> section.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Potts model solver</p>
<blockquote>
<div><ul class="simple">
<li><p>A solver for calculating the energy <span class="math notranslate nohighlight">\(E = -\sum_{ij} \delta_{\sigma_i, \sigma_j} \quad (\sigma_i = 0, 1, \dots, Q-1)\)</span> of a spin configuration on a hyper cubic lattice (<span class="math notranslate nohighlight">\(\{\sigma_i\}\)</span>, <span class="math notranslate nohighlight">\(\sigma_i = 0, 1, \dots, Q-1\)</span>).</p></li>
<li><p>The dimension and lengths of a hyper cubic lattice <span class="math notranslate nohighlight">\(L\)</span>, and the local degree of freedom of a spin <span class="math notranslate nohighlight">\(Q\)</span> are specified in the <code class="docutils literal notranslate"><span class="pre">[config]</span></code> section.</p></li>
<li><p>This solver is for the purpose of testing of algorithms and tutorials.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>This section specifies solver parameters such as solver type (VASP, QE, …), path to solver, directory with solver-specific input file(s).
An example is shown as follows:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[sampling.solver]
type = &#39;vasp&#39;
path = &#39;./vasp&#39;
base_input_dir = &#39;./baseinput&#39;
perturb = 0.1
run_scheme = &#39;mpi_spawn_ready&#39;
</pre></div>
</div>
</div></blockquote>
<section id="input-format">
<h2><span class="section-number">5.3.1. </span>Input Format<a class="headerlink" href="#input-format" title="Permalink to this heading">¶</a></h2>
<p>Keywords and their values are specified by a keyword and its value in the form <code class="docutils literal notranslate"><span class="pre">keyword</span> <span class="pre">=</span> <span class="pre">value</span></code>.
Comments can also be entered by adding # (Subsequent characters are ignored).</p>
</section>
<section id="keywords">
<h2><span class="section-number">5.3.2. </span>Keywords<a class="headerlink" href="#keywords" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p>
<p><strong>Format :</strong> str</p>
<p><strong>Description :</strong>
The solver type (<code class="docutils literal notranslate"><span class="pre">OpenMX,</span> <span class="pre">QE,</span> <span class="pre">VASP,</span> <span class="pre">aenet,</span> <span class="pre">aenetPyLammps,</span> <span class="pre">potts</span></code>).
When <code class="docutils literal notranslate"><span class="pre">potts</span></code>, the following parameters are not used.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p>
<p><strong>Format :</strong> str</p>
<p><strong>Description :</strong>
The path to the solver.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">base_input_dir</span></code></p>
<p><strong>Format :</strong> str or list of str</p>
<p><strong>Description :</strong>
The path to the base input file.
If multiple calculations are set up in the form of a list, each calculation using each input is performed in turn. For the second and subsequent calculations, the structure from the last step of the previous calculation is used as the initial coordinates, and the energy from the last calculation is used. For example, it is possible to perform a fast structural optimization in the first input file at the expense of accuracy, and then perform the structural optimization in the second and later input files with a higher accuracy setting. Or, in the case of grid vector relaxation, one can run the same input multiple times to reset the computational mesh based on a set plane-wave cutoff.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">perturb</span></code></p>
<p><strong>Format :</strong> float</p>
<p><strong>Description :</strong>
If a structure with good symmetry is input, structure optimization tends to stop at the saddle point. In order to avoid this, an initial structure is formed by randomly displacing each atom in proportion to this parameter. It can also be set to 0.0 or false. Default value = 0.0.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ignore_species</span></code></p>
<p><strong>Format :</strong> list</p>
<p><strong>Description :</strong>
Specify atomic species to “ignore” in neural network models such as <code class="docutils literal notranslate"><span class="pre">aenet</span></code>. For those that always have an occupancy of 1, it is computationally more efficient to ignore their presence when training and evaluating neural network models.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">run_scheme</span></code> (Only for <code class="docutils literal notranslate"><span class="pre">sampling.solver</span></code>)</p>
<p><strong>Format :</strong> str</p>
<p><strong>Description :</strong>
Way to invoke the solver program.
For details, please see <a class="reference internal" href="../how_to_use/index.html#solver-specific-notes"><span class="std std-ref">Specific notes for first-principles solvers</span></a></p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">parallel_level</span></code> (Only for <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">=</span> <span class="pre">&quot;QE&quot;</span></code>)</p>
<p><strong>Format :</strong> dict</p>
<p><strong>Description :</strong>
How to split parallel cpu resources, i.e., <a class="reference external" href="https://www.quantum-espresso.org/Doc/user_guide/node18.html">Parallelization levels</a> .
Key names are long-form command-line options (without the leading hyphen), that is, <code class="docutils literal notranslate"><span class="pre">nimage</span></code>, <code class="docutils literal notranslate"><span class="pre">npools</span></code>, <code class="docutils literal notranslate"><span class="pre">nband</span></code>, <code class="docutils literal notranslate"><span class="pre">ntg</span></code>, and <code class="docutils literal notranslate"><span class="pre">ndiag</span></code>.
Values are the number of parallelization.
Only the specified elements will be passed to <code class="docutils literal notranslate"><span class="pre">pw.x</span></code> as command-line options.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">function</span></code> (Only for <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">=</span> <span class="pre">&quot;user&quot;</span></code>)</p>
<p><strong>Format :</strong> str</p>
<p><strong>Description :</strong>
Specify a user-defined solver function.</p>
<ul>
<li><p>The solver function must take a <code class="docutils literal notranslate"><span class="pre">pymatgen.core.Structure</span></code> object as an argument and return a <code class="docutils literal notranslate"><span class="pre">float</span></code> value.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">.</span></code> is included, it is assumed that the function is defined in a module, and the module will be automatically imported.</p>
<blockquote>
<div><ul class="simple">
<li><p>For example, if <code class="docutils literal notranslate"><span class="pre">function</span> <span class="pre">=</span> <span class="pre">&quot;mypackage.mymodule.myfunction&quot;</span></code> is specified, <code class="docutils literal notranslate"><span class="pre">mypackage.mymodule</span></code> is imported and <code class="docutils literal notranslate"><span class="pre">myfunction</span></code> is called.</p></li>
<li><p>The package is searched from the current directory as well as from the directories specified by the <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> environment variable.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">abICS</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">1. About abICS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">2. Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how_to_use/index.html">3. Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">4. Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">5. Input Files Format</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="parameter_sampling.html">5.1. [sampling] section</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameter_mlref.html">5.2. [mlref] section</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.3. [sampling.solver], [mlref.solver] section</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameter_train.html">5.4. [train] section</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameter_observer.html">5.5. [observer] section</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameter_config.html">5.6. [config] section</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameter_log.html">5.7. [log] section</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../outputfiles/index.html">6. Output Files Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">7. Miscellaneous tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithm/index.html">8. Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledge/index.html">9. Acknowledgement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact/index.html">10. Contacts</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html"><span class="section-number">5. </span>Input Files Format</a><ul>
      <li>Previous: <a href="parameter_mlref.html" title="previous chapter"><span class="section-number">5.2. </span>[mlref] section</a></li>
      <li>Next: <a href="parameter_train.html" title="next chapter"><span class="section-number">5.4. </span>[train] section</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019-, Institute for Solid State Physics, University of Tokyo.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/inputfiles/parameter_solver.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>